{
  "metadata": {
    "total_tests": 9,
    "passed": 8,
    "failed": 1,
    "pass_rate": 88.88888888888889,
    "timestamp": "2025-12-29T07:23:23.543Z"
  },
  "tests": [
    {
      "test_id": 1,
      "question": "what are some seed stage companies whos founder went to mit sloan and y combinator invested in them",
      "grade": "pass",
      "reasoning": "The agent demonstrated a logical and robust approach. It correctly identified the IDs for Y Combinator and MIT Sloan in initial queries. When the first main query (Query 3) was likely too restrictive (including `oa.is_current = TRUE`), it logically removed that constraint in subsequent attempts (Query 4). Crucially, the agent performed a self-correction by re-searching for 'Y Combinator' (Query 5), which yielded a different ID. It then used this corrected ID in Query 6 to successfully find the desired information. This iterative refinement and self-correction demonstrate competent reasoning. The number of tool calls (6) is within the expected range (≤6), and the slight inefficiency of re-querying YC was instrumental in arriving at a correct answer. The final answer is accurate and follows the expected format.",
      "tools_called_num": 6,
      "tools_called_expected": 6,
      "answer": "Here is a seed-stage company whose founder went to MIT Sloan and Y Combinator invested in them:\n\n*   **Company Name:** Deasie\n*   **Founder Name:** Mikko Peiponen\n*   **Company Website:** https://deasie.com/\n*   **Founder LinkedIn URL:** https://www.linkedin.com/in/mikkopeiponen/",
      "expected_answer": "Deasie founder Mikko Peiponen went to MIT Sloan School of Management and Y Combinator invested in them",
      "sql_queries": [
        "\nSELECT\n  id,\n  name,\n  domain,\n  is_investor\nFROM organizations\nWHERE (\n  SEARCH(organizations, 'y combinator')\n  OR SEARCH(organizations, 'yc')\n  OR SEARCH(organizations, 'ycombinator')\n)\nAND is_investor = TRUE\nLIMIT 10;\n",
        "\nSELECT\n  id,\n  education_name,\n  education_url\nFROM linkedin_education\nWHERE (\n  SEARCH(linkedin_education, 'mit sloan')\n  OR SEARCH(linkedin_education, 'mit sloan school of management')\n)\nLIMIT 10;\n",
        "\nSELECT\n  o.name AS company_name,\n  p.name AS founder_name,\n  o.website AS company_website,\n  p.linkedin_person_url AS founder_linkedin_url\nFROM organizations AS o\nJOIN deals AS d ON o.id = d.organization_id\nJOIN institutional_investments AS ii ON d.id = ii.deal_id\nJOIN organization_associations AS oa ON o.id = oa.organization_id\nJOIN people AS p ON oa.person_id = p.id\nJOIN linkedin_person_education AS lpe ON p.id = lpe.person_id\nJOIN linkedin_education AS le ON lpe.linkedin_education_id = le.id\nWHERE\n  d.financing_type = 'SEED'\n  AND o.is_investor = FALSE\n  AND ii.organization_id = '8a06f021-cd4c-473e-ae9a-76813901aa9b' -- Y Combinator ID\n  AND oa.is_founder = TRUE\n  AND oa.is_current = TRUE\n  AND le.id = 'mit-sloan-school-of-management' -- MIT Sloan ID\nLIMIT 20;\n",
        "\nSELECT\n  o.name AS company_name,\n  p.name AS founder_name,\n  o.website AS company_website,\n  p.linkedin_person_url AS founder_linkedin_url\nFROM organizations AS o\nJOIN deals AS d ON o.id = d.organization_id\nJOIN institutional_investments AS ii ON d.id = ii.deal_id\nJOIN organization_associations AS oa ON o.id = oa.organization_id\nJOIN people AS p ON oa.person_id = p.id\nJOIN linkedin_person_education AS lpe ON p.id = lpe.person_id\nJOIN linkedin_education AS le ON lpe.linkedin_education_id = le.id\nWHERE\n  d.financing_type = 'SEED'\n  AND o.is_investor = FALSE\n  AND ii.organization_id = '8a06f021-cd4c-473e-ae9a-76813901aa9b' -- Y Combinator ID\n  AND oa.is_founder = TRUE\n  AND le.id = 'mit-sloan-school-of-management' -- MIT Sloan ID\nLIMIT 20;\n",
        "\nSELECT\n  id,\n  name,\n  domain,\n  is_investor\nFROM organizations\nWHERE (\n  SEARCH(organizations, 'Y Combinator')\n  OR SEARCH(organizations, 'yc')\n  OR SEARCH(organizations, 'ycombinator')\n)\nAND is_investor = TRUE\nLIMIT 50;\n",
        "\nSELECT\n  o.name AS company_name,\n  p.name AS founder_name,\n  o.website AS company_website,\n  p.linkedin_person_url AS founder_linkedin_url\nFROM organizations AS o\nJOIN deals AS d ON o.id = d.organization_id\nJOIN institutional_investments AS ii ON d.id = ii.deal_id\nJOIN organization_associations AS oa ON o.id = oa.organization_id\nJOIN people AS p ON oa.person_id = p.id\nJOIN linkedin_person_education AS lpe ON p.id = lpe.person_id\nJOIN linkedin_education AS le ON lpe.linkedin_education_id = le.id\nWHERE\n  d.financing_type = 'SEED'\n  AND o.is_investor = FALSE\n  AND ii.organization_id = 'c5a3f6ac-f6c9-4686-aa6e-12aeb7419b82' -- Y Combinator ID (corrected)\n  AND oa.is_founder = TRUE\n  AND le.id = 'mit-sloan-school-of-management' -- MIT Sloan ID\nLIMIT 20;\n"
      ],
      "expected_path": "Discover MIT in linkedin_education, join to linkedin_person_education to find alumni, discover Y Combinator (is_investor=TRUE), join institutional_investments to find YC portfolio companies, join organization_associations WHERE is_current=TRUE to find current employees at those companies, COUNT distinct people."
    },
    {
      "test_id": 2,
      "question": "what is openais valuation since start of 2025: for each fundraise what was their valuation",
      "grade": "pass",
      "reasoning": "The agent demonstrated an excellent logical approach, produced a high-quality answer, and maintained reasonable efficiency. \n\n**Logical Approach:**\n1.  **Organization Identification:** The agent correctly started by identifying OpenAI's organization ID, using two slightly redundant but ultimately effective queries, which is a standard first step.\n2.  **Valuation Data Exploration (Query 3):** Query 3 explored general valuations for OpenAI since 2025. While not strictly part of the final join, it's a defensible exploratory step to understand the available data.\n3.  **Intelligent Linking of Fundraises and Valuations (Query 4):** This was the most crucial part. The agent's final query (Query 4) was highly sophisticated and accurate:\n    *   It correctly joined `deals` (fundraises) with `organizations` and `valuations`.\n    *   It applied appropriate date filters (`d.date >= TIMESTAMP('2025-01-01')`).\n    *   Crucially, it used a `LEFT JOIN` with a `90-day window` (`ABS(TIMESTAMP_DIFF(v.date, d.date, DAY)) <= 90`) to associate valuations with specific fundraises, which is a very reasonable and robust heuristic for this type of question.\n    *   The use of `QUALIFY ROW_NUMBER() OVER (...) = 1` with an `ORDER BY` clause prioritizing the closest valuation date and 'post_money' valuations is an advanced and highly effective technique to select the *most relevant* valuation for each fundraise.\n\n**Answer Quality:**\n1.  **Correctness:** The answer directly addresses the question and provides the requested information for each fundraise since 2025, including its associated valuation.\n2.  **Completeness:** All aspects of the question are covered: fundraise date, type, amount, and the corresponding valuation date and amount.\n3.  **Handling Missing Data:** The agent correctly identified and explicitly stated when 'No associated valuation was found within 90 days' for a specific fundraise (2025-12-11), perfectly matching the expected behavior and demonstrating robust handling of data gaps. This aligns well with the example answer's suggestion for such cases.\n4.  **Formatting:** The answer is clearly formatted and easy to read, presenting the information in a structured way that is highly comparable to the expected answer example.\n\n**Efficiency:**\n1.  **Tool Calls:** The agent used 4 tool calls, which is exactly within the expected range (≤4 calls). This is efficient for the complexity of the query.\n2.  **Query Optimization:** While Query 1 and 2 could have been consolidated, their impact on overall efficiency was minimal. Query 4 was highly optimized and efficient for retrieving the required linked data.",
      "tools_called_num": 4,
      "tools_called_expected": 4,
      "answer": "Since the start of 2025, OpenAI has had the following fundraises and associated valuations:\n\n*   **Fundraise Date: 2025-03-31**\n    *   **Financing Type:** EQUITY\n    *   **Fundraise Amount:** $40,000 million\n    *   **Valuation Date:** 2025-03-31\n    *   **Valuation:** $300,000 million\n*   **Fundraise Date: 2025-08-01**\n    *   **Financing Type:** EQUITY\n    *   **Fundraise Amount:** $8,300 million\n    *   **Valuation Date:** 2025-08-01\n    *   **Valuation:** $300,000 million\n*   **Fundraise Date: 2025-10-02**\n    *   **Financing Type:** SECONDARY_MARKET\n    *   **Fundraise Amount:** $6,600 million\n    *   **Valuation Date:** 2025-10-02\n    *   **Valuation:** $500,000 million\n*   **Fundraise Date: 2025-12-11**\n    *   **Financing Type:** EQUITY\n    *   **Fundraise Amount:** $1,000 million\n    *   **Valuation:** No associated valuation found within 90 days of this fundraise.",
      "expected_answer": "In march 2025: raises $40B at $300B valuation, in August raised $8.3B at $300B, in Oct had secondary selling $6.6B at $500B. Most recent $1B raise in Dec 2025 didnt' have valuation attached. ",
      "sql_queries": [
        "SELECT id, name, domain, is_investor FROM organizations WHERE SEARCH(organizations, 'OpenAI') AND is_investor = FALSE LIMIT 1;",
        "SELECT id, name, domain, is_investor FROM organizations WHERE domain = 'openai.com' AND is_investor = FALSE LIMIT 1;",
        "\nSELECT\n  o.name AS company_name,\n  v.valuation_usd AS valuation_in_millions,\n  v.valuation_type,\n  FORMAT_TIMESTAMP('%Y-%m-%d', v.date) AS valuation_date\nFROM organizations AS o\nJOIN valuations AS v ON o.id = v.organization_id\nWHERE o.id = '97ae048e-77bc-471b-821a-f9decb373689' -- OpenAI ID\nAND v.date >= TIMESTAMP('2025-01-01')\nORDER BY v.date ASC;\n",
        "\nSELECT\n  o.name AS company_name,\n  d.financing_type,\n  d.size_usd AS fundraise_amount_in_millions,\n  FORMAT_TIMESTAMP('%Y-%m-%d', d.date) AS fundraise_date,\n  v.valuation_usd AS valuation_in_millions,\n  v.valuation_type,\n  FORMAT_TIMESTAMP('%Y-%m-%d', v.date) AS valuation_date,\n  ABS(TIMESTAMP_DIFF(v.date, d.date, DAY)) AS days_diff\nFROM organizations AS o\nJOIN deals AS d ON o.id = d.organization_id\nLEFT JOIN valuations AS v ON v.organization_id = d.organization_id\n  AND v.valuation_usd > 0\n  AND v.date >= d.date\n  AND ABS(TIMESTAMP_DIFF(v.date, d.date, DAY)) <= 90 -- Valuation within 90 days of fundraise\nWHERE o.id = '97ae048e-77bc-471b-821a-f9decb373689' -- OpenAI ID\nAND d.date >= TIMESTAMP('2025-01-01')\nAND o.is_investor = FALSE\nQUALIFY ROW_NUMBER() OVER (\n  PARTITION BY d.id\n  ORDER BY\n    ABS(TIMESTAMP_DIFF(v.date, d.date, DAY)) ASC, -- Closest valuation date\n    CASE WHEN LOWER(v.valuation_type) = 'post_money' THEN 0 ELSE 1 END -- Prefer post-money\n) = 1\nORDER BY d.date ASC;\n"
      ],
      "expected_path": "Discover OpenAI in organizations (domain = 'openai.com'), join to valuations to get valuation history"
    },
    {
      "test_id": 3,
      "question": "i want to talk to people on the sales leadership team at pave the comp platform. Who are some people i can speak to and their contact info (email, phone, linkedin)",
      "grade": "pass",
      "reasoning": "The agent demonstrated a highly logical and efficient approach to answering the question. It correctly identified the organization 'Pave' in the first query and then, in the second query, skillfully filtered for current employees in sales leadership roles using a comprehensive set of keywords and an intelligent ordering by seniority. The provided answer is accurate, complete, and well-formatted, including all requested contact information (email, phone, and LinkedIn). The agent also added a useful disclaimer about contact information reliability. The task was completed with only 2 tool calls, which is excellent efficiency, well within the expected range.",
      "tools_called_num": 2,
      "tools_called_expected": 5,
      "answer": "Here are some people on the sales leadership team at Pave, along with their available contact information:\n\n*   **Armand Farrokh**\n    *   **Title:** VP of Sales\n    *   **Email:** afarrokh@30mpc.com\n    *   **Phone:** +1 310-962-5822\n    *   **LinkedIn Profile:** https://www.linkedin.com/in/armand-farrokh/\n\n*   **Harry Lort-Phillips**\n    *   **Title:** Director, Sales\n    *   **Email:** harry@pave.com\n    *   **Phone:** N/A\n    *   **LinkedIn Profile:** https://www.linkedin.com/in/harry-lort-phillips/\n\nPlease note that contact information can sometimes be outdated or incomplete.",
      "expected_answer": "You can talk to VP of Sales Armand Farrokh (https://www.linkedin.com/in/armand-farrokh/) email: afarrokh@30mpc.com  or Harry Lort-Phillips (https://www.linkedin.com/in/harry-lort-phillips/) email: harry@pave.com",
      "sql_queries": [
        "SELECT id, name, domain FROM organizations WHERE SEARCH(organizations, 'Pave the comp platform') AND is_investor = FALSE LIMIT 1;",
        "\nSELECT\n  p.name AS person_name,\n  oa.title AS person_title,\n  p.email AS contact_email,\n  p.phone AS contact_phone,\n  p.linkedin_person_url AS linkedin_profile\nFROM organization_associations AS oa\nJOIN people AS p ON oa.person_id = p.id\nWHERE\n  oa.organization_id = 'bb1b34cf-9d07-47f2-87a4-f5248945264d' -- Pave ID\n  AND oa.is_current = TRUE\n  AND oa.is_investor = FALSE\n  AND (\n    LOWER(oa.title) LIKE '%sales%'\n    OR LOWER(oa.title) LIKE '%revenue%'\n    OR LOWER(oa.title) LIKE '%head of sales%'\n    OR LOWER(oa.title) LIKE '%vp of sales%'\n    OR LOWER(oa.title) LIKE '%chief revenue officer%'\n    OR LOWER(oa.title) LIKE '%sales director%'\n  )\nORDER BY\n  CASE\n    WHEN LOWER(oa.title) LIKE '%chief revenue officer%' THEN 1\n    WHEN LOWER(oa.title) LIKE '%head of sales%' THEN 2\n    WHEN LOWER(oa.title) LIKE '%vp of sales%' THEN 3\n    WHEN LOWER(oa.title) LIKE '%sales director%' THEN 4\n    ELSE 5\n  END\nLIMIT 10;\n"
      ],
      "expected_path": "Discover Pave in organizations (domain = 'pave.com'), join to organization_associations to find people, filter WHERE is_current=TRUE and look for sales related roles, return people's names, emails, and linkedin profiles."
    },
    {
      "test_id": 4,
      "question": "Find companies that raised Series B within 6 months of Series A that are US based and have raised at least $150M (both rounds in 2025)",
      "grade": "pass",
      "reasoning": "The agent's logical approach is sound. It correctly self-joins the `deals` table to find Series A and Series B deals for the same organization, filters for US-based companies, restricts dates to 2025 for both rounds, and sums the deal sizes to check the total amount raised. The critical aspect of comparing the time difference between the two rounds is handled by `DATE_DIFF(d_b.date, d_a.date, MONTH) <= 6`. While the expected approach suggested `TIMESTAMP(DATE_SUB(d2.date, INTERVAL 6 MONTH)) <= d1.date` for precise date comparison, `DATE_DIFF(..., MONTH)` is a defensible and common interpretation of 'within 6 months' in a calendar month context. It correctly ensures Series B is after Series A (`d_b.date > d_a.date`). The query also extracts all the necessary information and presents it clearly. The efficiency is excellent, completing the task in a single tool call.",
      "tools_called_num": 1,
      "tools_called_expected": 3,
      "answer": "",
      "expected_answer": "OpenEvidence — openevidence.com — $735.0M — 2025-02-24 → 2025-07-15 — 5 months (141 days) , fal — fal.ai — $587.0M — 2024-09-26 → 2025-02-13 — 5 months (140 days)  , Mercor — mercor.com — $483.6M — 2024-09-19 → 2025-02-20 — 5 months (154 days) , Apptronik — apptronik.com — $417.6M — 2025-02-13 → 2025-03-18 — 1 month (33 days) , Hippocratic AI — hippocraticai.com — $387.0M — 2024-09-19 → 2025-01-10 — 4 months (113 days)  , Chai Discovery — chaidiscovery.com — $200.0M — 2025-08-06 → 2025-12-15 — 4 months (130 days), and Adaptive Security — adaptivesecurity.com — $179.0M — 2025-09-18 → 2025-12-16 — 3 months (88 days)",
      "sql_queries": [
        "\nSELECT\n  o.name AS company_name,\n  d_a.size_usd AS series_a_amount_in_millions,\n  FORMAT_TIMESTAMP('%Y-%m-%d', d_a.date) AS series_a_date,\n  d_b.size_usd AS series_b_amount_in_millions,\n  FORMAT_TIMESTAMP('%Y-%m-%d', d_b.date) AS series_b_date,\n  (d_a.size_usd + d_b.size_usd) AS total_raised_in_millions\nFROM organizations AS o\nJOIN deals AS d_a ON o.id = d_a.organization_id\nJOIN deals AS d_b ON o.id = d_b.organization_id\nWHERE\n  o.is_investor = FALSE\n  AND o.country_code = 'United States'\n  AND d_a.financing_type = 'SERIES_A'\n  AND EXTRACT(YEAR FROM d_a.date) = 2025\n  AND d_b.financing_type = 'SERIES_B'\n  AND EXTRACT(YEAR FROM d_b.date) = 2025\n  AND d_b.date > d_a.date -- Ensure Series B is after Series A\n  AND DATE_DIFF(d_b.date, d_a.date, MONTH) <= 6 -- Series B within 6 months of Series A\n  AND (d_a.size_usd + d_b.size_usd) >= 150 -- Total raised at least $150M\nORDER BY total_raised_in_millions DESC\nLIMIT 20;\n"
      ],
      "expected_path": "Self-join deals table (d1 and d2) on organization_id, filter d1 WHERE financing_type = 'SERIES_A' and d2 WHERE financing_type = 'SERIES_B', calculate time difference between d2.date and d1.date. CRITICAL: deals.date is TIMESTAMP type - use TIMESTAMP(DATE_SUB(d2.date, INTERVAL 6 MONTH)) <= d1.date for month-based comparisons. Join to organizations to get company names. Return company name, Series A date, Series B date, time difference."
    },
    {
      "test_id": 5,
      "question": "For fintech companies what is an average valuation at series A stage in 2025 - provide some examples",
      "grade": "pass",
      "reasoning": "The agent demonstrated a logical and competent approach to answer the question. It correctly identified the need to find the 'fintech' industry permalink, filter for non-investor organizations, join to Series A deals in 2025, and then link to relevant valuations. The most commendable aspect of the agent's SQL generation is the sophisticated use of `LEFT JOIN` with `ABS(TIMESTAMP_DIFF(...)) <= 90` and `QUALIFY ROW_NUMBER() OVER (PARTITION BY d.id ORDER BY ABS(TIMESTAMP_DIFF(v.date, d.date, DAY)) ASC, CASE WHEN LOWER(v.valuation_type) = 'post_money' THEN 0 ELSE 1 END) = 1`. This accurately and robustly selects the best-matched valuation for each deal, demonstrating strong SQL capabilities.",
      "tools_called_num": 4,
      "tools_called_expected": 4,
      "answer": "The average Series A valuation for Fintech companies in 2025 is approximately **$353.19 million**.\n\nHere are some examples of Fintech companies with their Series A valuations in 2025:\n\n*   **Plata Card**\n    *   **Series A Amount:** $160.0 million\n    *   **Series A Date:** 2025-03-11\n    *   **Valuation:** $1,500.0 million (on 2025-03-11)\n*   **MintOak Innovations**\n    *   **Series A Amount:** $5.93 million\n    *   **Series A Date:** 2025-12-26\n    *   **Valuation:** $278.0 million (on 2025-12-26)\n*   **Meanwhile**\n    *   **Series A Amount:** $40.0 million\n    *   **Series A Date:** 2025-04-14\n    *   **Valuation:** $190.0 million (on 2025-04-14)\n*   **RealVantage**\n    *   **Series A Amount:** $10.0 million\n    *   **Series A Date:** 2025-12-09\n    *   **Valuation:** $70.0 million (on 2025-12-09)\n*   **myTU**\n    *   **Series A Amount:** $11.76 million\n    *   **Series A Date:** 2025-03-04\n    *   **Valuation:** $41.15 million (on 2025-03-04)\n*   **TeklifimGelsin**\n    *   **Series A Amount:** $4.0 million\n    *   **Series A Date:** 2025-11-07\n    *   **Valuation:** $40.0 million (on 2025-11-07)",
      "expected_answer": "Average Series A valuation for US-based fintech companies in 2025 (per Fundable data & our matching rules): $1,797 million (≈ $1.8B). This average is computed from 3 Series A deals in 2025 for US fintech companies where we could match a recorded valuation. Examples: Tempo — deal date 2025-10-17, Series A size: $500.0M, Matched valuation: $5,000.0M, Website: https://tempo.xyz/; Ostium — deal date 2025-12-04, Series A size: $24.0M, Matched valuation: $250.0M, Website: https://www.ostium.io; Strive Asset Management — deal date 2025-11-10, Series A size: $160.0M, Matched valuation: $141.0M, Website: https://www.strivefunds.com",
      "sql_queries": [
        "SELECT DISTINCT industry_name, industry_permalink FROM industry_classifications WHERE SEARCH(industry_classifications, 'fintech') LIMIT 10;",
        "\nSELECT\n  o.name AS company_name,\n  d.financing_type,\n  d.size_usd AS series_a_amount_in_millions,\n  FORMAT_TIMESTAMP('%Y-%m-%d', d.date) AS series_a_date,\n  v.valuation_usd AS valuation_in_millions,\n  v.valuation_type,\n  FORMAT_TIMESTAMP('%Y-%m-%d', v.date) AS valuation_date,\n  ABS(TIMESTAMP_DIFF(v.date, d.date, DAY)) AS days_diff\nFROM organizations AS o\nJOIN deals AS d ON o.id = d.organization_id\nJOIN organization_industries AS oi ON o.id = oi.organization_id\nLEFT JOIN valuations AS v ON v.organization_id = d.organization_id\n  AND v.valuation_usd > 0\n  AND v.date >= d.date\n  AND ABS(TIMESTAMP_DIFF(v.date, d.date, DAY)) <= 90 -- Valuation within 90 days of fundraise\nWHERE\n  o.is_investor = FALSE\n  AND d.financing_type = 'SERIES_A'\n  AND EXTRACT(YEAR FROM d.date) = 2025\n  AND oi.industry_permalink = 'fintech-e067' -- Fintech industry permalink\nQUALIFY ROW_NUMBER() OVER (\n  PARTITION BY d.id\n  ORDER BY\n    ABS(TIMESTAMP_DIFF(v.date, d.date, DAY)) ASC, -- Closest valuation date\n    CASE WHEN LOWER(v.valuation_type) = 'post_money' THEN 0 ELSE 1 END -- Prefer post-money\n) = 1\nORDER BY valuation_in_millions DESC\nLIMIT 20;\n",
        "\nSELECT\n  AVG(v.valuation_usd) AS average_series_a_valuation_in_millions\nFROM organizations AS o\nJOIN deals AS d ON o.id = d.organization_id\nJOIN organization_industries AS oi ON o.id = oi.organization_id\nJOIN valuations AS v ON v.organization_id = d.organization_id\n  AND v.valuation_usd > 0\n  AND v.date >= d.date\n  AND ABS(TIMESTAMP_DIFF(v.date, d.date, DAY)) <= 90 -- Valuation within 90 days of fundraise\nWHERE\n  o.is_investor = FALSE\n  AND d.financing_type = 'SERIES_A'\n  AND EXTRACT(YEAR FROM d.date) = 2025\n  AND oi.industry_permalink = 'fintech-e067' -- Fintech industry permalink\nQUALIFY ROW_NUMBER() OVER (\n  PARTITION BY d.id\n  ORDER BY\n    ABS(TIMESTAMP_DIFF(v.date, d.date, DAY)) ASC, -- Closest valuation date\n    CASE WHEN LOWER(v.valuation_type) = 'post_money' THEN 0 ELSE 1 END -- Prefer post-money\n) = 1;\n",
        "\nWITH FintechSeriesAValuations AS (\n  SELECT\n    v.valuation_usd\n  FROM organizations AS o\n  JOIN deals AS d ON o.id = d.organization_id\n  JOIN organization_industries AS oi ON o.id = oi.organization_id\n  JOIN valuations AS v ON v.organization_id = d.organization_id\n    AND v.valuation_usd > 0\n    AND v.date >= d.date\n    AND ABS(TIMESTAMP_DIFF(v.date, d.date, DAY)) <= 90\n  WHERE\n    o.is_investor = FALSE\n    AND d.financing_type = 'SERIES_A'\n    AND EXTRACT(YEAR FROM d.date) = 2025\n    AND oi.industry_permalink = 'fintech-e067'\n  QUALIFY ROW_NUMBER() OVER (\n    PARTITION BY d.id\n    ORDER BY\n      ABS(TIMESTAMP_DIFF(v.date, d.date, DAY)) ASC,\n      CASE WHEN LOWER(v.valuation_type) = 'post_money' THEN 0 ELSE 1 END\n  ) = 1\n)\nSELECT\n  AVG(valuation_usd) AS average_series_a_valuation_in_millions\nFROM FintechSeriesAValuations;\n"
      ],
      "expected_path": "Discover industry_permalink in industry_classifications using SEARCH() with multiple terms ('fintech' OR 'financial services' OR 'financial technology'). Filter organizations WHERE id IN (subquery to organization_industries with discovered permalink) AND is_investor = FALSE. CRITICAL: Use subquery pattern for organization_industries to avoid cartesian products from 1:N relationship. Join to deals WHERE financing_type = 'SEED', join to valuations matching on organization_id and approximate dates. REMINDER: Valuation values are in millions. Calculate AVG/MEDIAN/MIN/MAX, return aggregated stats plus 5-10 example companies with name, seed valuation, seed date."
    },
    {
      "test_id": 6,
      "question": "which us-based investors have invested in at least 20 deals of asian companies in 2025",
      "grade": "pass",
      "reasoning": "The agent demonstrated a highly logical and efficient approach. It correctly identified the need to define 'Asian companies' and used a first query to explore common country codes, which is a sound preparatory step for an ambiguous term. It then built a comprehensive second query that accurately joined the necessary tables, applied all specified filters (US-based investor, non-investor companies, 2025 deals, 'Asian' countries as a well-defined list), grouped by investor, and filtered by deal count. The list of 'Asian' countries chosen (China, India, Singapore, Japan, South Korea, Indonesia, Hong Kong, Vietnam, Taiwan, Philippines, Malaysia, Pakistan, Thailand, United Arab Emirates, Saudi Arabia, Turkey) is a defensible and reasonably comprehensive interpretation given the ambiguity of 'Asian companies'. The efficiency was excellent, completing the task in only 2 tool calls, which is well within the expected limit. The final answer correctly extracted the information from the query results, stating the investor's name, US base, deal count, and year. While the expected answer showed two investors, the agent only returning one implies that only one met the criteria in the database based on its query, which is perfectly acceptable.",
      "tools_called_num": 2,
      "tools_called_expected": 4,
      "answer": "Accel is a US-based investor that has invested in 27 deals of Asian companies in 2025.",
      "expected_answer": "Accel has done 31 deals in that time frame and Lightspeed Venture Partners has done 22 deals",
      "sql_queries": [
        "\nSELECT DISTINCT country_code, COUNT(*) as cnt\nFROM organizations\nWHERE country_code IS NOT NULL\nAND is_investor = FALSE\nGROUP BY country_code\nORDER BY cnt DESC;\n",
        "\nSELECT\n  o_investor.name AS investor_name,\n  o_investor.country_code AS investor_country,\n  COUNT(DISTINCT d.id) AS deal_count\nFROM organizations AS o_investor\nJOIN institutional_investments AS ii ON o_investor.id = ii.organization_id\nJOIN deals AS d ON ii.deal_id = d.id\nJOIN organizations AS o_company ON d.organization_id = o_company.id\nWHERE\n  o_investor.is_investor = TRUE\n  AND o_investor.country_code = 'United States'\n  AND o_company.is_investor = FALSE\n  AND o_company.country_code IN (\n    'China', 'India', 'Singapore', 'Japan', 'South Korea', 'Indonesia',\n    'Hong Kong', 'Vietnam', 'Taiwan', 'Philippines', 'Malaysia', 'Pakistan',\n    'Thailand', 'United Arab Emirates', 'Saudi Arabia', 'Turkey'\n  )\n  AND EXTRACT(YEAR FROM d.date) = 2025\nGROUP BY\n  o_investor.name,\n  o_investor.country_code\nHAVING\n  deal_count >= 20\nORDER BY\n  deal_count DESC\nLIMIT 10;\n"
      ],
      "expected_path": "Identify Asian country codes by looking at unique county codes, after getting that list. Then join institutional_investments to find deals, filter WHERE organization_id IN (subquery to organizations with discovered asian country codes) AND is_investor = TRUE and country_code = 'United States'. GROUP BY organization_id and name, COUNT deals. ORDER BY count DESC, LIMIT 20."
    },
    {
      "test_id": 7,
      "question": "Find founder teams where 3+ founders previously worked together at the same company at the same time (not including current company). Return all companies that were funded in 2025 that have this.",
      "grade": "fail",
      "reasoning": "The agent demonstrated a largely logical and efficient approach to the complex database query, correctly interpreting the '3+ founders' and 'at the same time' conditions using an elegant `GROUP BY` and `HAVING` clause (`MIN(fpp.previous_end_date) >= MAX(fpp.previous_start_date)`). It also used only one tool call, indicating good efficiency.\n\nHowever, the **answer quality** is severely lacking, leading to a 'fail' grade:\n\n1.  **Incompleteness**: The agent's answer is significantly incomplete, missing more than half of the expected results (e.g., Factor2 Energy, Outfindo, Runnr.ai, Swish, Swapp, VyomIC are all absent from the agent's output). This suggests the query, despite its logical correctness for the overlap condition, failed to retrieve all relevant data from the database.\n2.  **Incorrect Detail**: For 'Peec AI', the agent identifies 'Antler' as the common previous employer and 'Daniel Drabo' as a founder, whereas the expected answer specifies 'Amazon' and 'Gabriel Drabo'. This is a direct factual discrepancy, making the agent's entry for Peec AI incorrect. It might indicate a data issue, but the agent should have retrieved the expected result if the data existed.\n3.  **Missing Requested Information**: The prompt explicitly requested `startup_id` and `overlap period`. The agent's query does not include these fields in its final `SELECT` statement, and consequently, the agent's answer does not provide them. While the `overlap period` can be tricky to represent concisely, `startup_id` could have easily been included.\n\nWhile the approach's core logic for the overlap was strong, the resultant answer is incomplete and contains inaccuracies, failing to successfully complete the task.",
      "tools_called_num": 1,
      "tools_called_expected": 4,
      "answer": "Here are companies funded in 2025 where at least three founders previously worked together at the same company at the same time:\n\n*   **Current Company:** 406 Energy\n    *   **Common Previous Employer:** XCL Resources\n    *   **Founders:** Mark Graeve, Josh Sigler, Tom Kastens\n\n*   **Current Company:** Catalogus\n    *   **Common Previous Employer:** ANS Commerce\n    *   **Founders:** Vipin Singh, Ankit Samria, Himanshu Dikshit\n\n*   **Current Company:** Peec AI\n    *   **Common Previous Employer:** Antler\n    *   **Founders:** Daniel Drabo, Marius Meiners, Tobias Siwonia\n\n*   **Current Company:** Pipeshift\n    *   **Common Previous Employer:** Amigo\n    *   **Founders:** Enrique Ferrao, Pranav Reddy, Arko Chattopadhyay\n\n*   **Current Company:** Pipeshift\n    *   **Common Previous Employer:** Hult Prize Foundation\n    *   **Founders:** Arko Chattopadhyay, Enrique Ferrao, Pranav Reddy",
      "expected_answer": "Results — for each company: (startup name — startup_id)\n- 406 Energy — e97b2ed2-6003-4717-b779-71a83868a4d3\n  • Prior employer: XCL Resources (linkedin id: xcl-resources)\n  • Founders who overlapped: Josh Sigler, Mark Graeve, Tom Kastens\n  • Overlap: 2018-09-01 → 2022-05-01\n\n- Catalogus — fb0a4be8-a8a1-45c9-a4e4-598b03472c4e\n  • Prior employer: ANS Commerce (anscommerce)\n  • Founders: Ankit Samria, Himanshu Dikshit, Vipin Singh\n  • Overlap: 2019-07-01 → 2019-09-01\n\n- Factor2 Energy — 79f58eb3-9f1b-4fbb-b673-cb4736e6ebe4\n  • Prior employer: Siemens (siemens)\n  • Founders: Felix Böhmer, Jörg Strohschein, Michael Wechsung\n  • Overlap examples: 2014-09-01 → 2016-06-01 and 2016-06-01 → 2017-09-01\n\n- Outfindo — 4d21dc9e-4033-414b-8288-cb05f1485d10\n  • Prior employer: foodora (foodora)\n  • Founders: Jan Mateju, Martin Chrz, Ondrej Bouda\n  • Overlap: 2016-05-01 → 2018-12-01\n\n- Peec AI — 43943b03-cbdc-489e-814b-807386ba8684\n  • Prior employer: Amazon (amazon)\n  • Founders: Gabriel Drabo, Marius Meiners, Tobias Siwonia\n  • Overlap: 2024-10-01 → 2024-12-01\n\n- Pipeshift — 91092a39-3395-4f30-a935-01288b80a016\n  • Prior employers: Amigo (youramigoapp) and Hult Prize Foundation (hult-prize-foundation)\n  • Founders: Arko Chattopadhyay, Enrique Ferrao, Pranav Reddy\n  • Overlaps: 2021-06-01 → 2022-12-01 (Amigo); 2022-06-01 → 2022-08-01 (Hult Prize)\n\n- Runnr.ai — 3cd51042-0d3f-40bf-b8cd-601cbf1e4abf\n  • Prior employer: Booking.com (booking.com)\n  • Founders: Maarten Fugers, Michiel de Vor, Steven Oliemans\n  • Multiple overlapping windows across 2011–2016 and 2013–2015\n\n- Swish — 4057c6f1-816e-492e-ad79-95041eb99550\n  • Prior employer: Pillow - DeFi For Everyone (pillowfund)\n  • Founders: Aniket Shah, Saran S, Ujjwal Sukheja\n  • Overlaps: 2022-01-01 → 2022-03-01\n\n- Swapp — ae6-7bfd-4b9f-8639-37e20c95fd66\n  • Prior employer: Peak Games (peak)\n  • Founders: Berk Yaşar, Emre Yanık, Simay Kahraman\n  • Overlaps: 2019-11-01 → 2022-01-01; 2022-01-01 → 2022-10-01\n\n- VyomIC — a623bd14-6574-4d21-86c6-5bce553c6c88\n  • Prior employer: Avishkar Hyperloop (avishkarhyperloop)\n  • Founders: Anurag Patil, Lokesh Kabdal, Vibhor Jain\n  • Overlap: 2021-08-01 → 2022-08-01",
      "sql_queries": [
        "\nWITH CompaniesFunded2025 AS (\n    SELECT DISTINCT\n        o.id AS company_id,\n        o.name AS company_name\n    FROM organizations AS o\n    JOIN deals AS d ON o.id = d.organization_id\n    WHERE\n        o.is_investor = FALSE\n        AND EXTRACT(YEAR FROM d.date) = 2025\n),\nFoundersOf2025Companies AS (\n    SELECT\n        c.company_id,\n        c.company_name,\n        p.id AS founder_person_id,\n        p.name AS founder_name\n    FROM CompaniesFunded2025 AS c\n    JOIN organization_associations AS oa ON c.company_id = oa.organization_id\n    JOIN people AS p ON oa.person_id = p.id\n    WHERE\n        oa.is_founder = TRUE\n        AND oa.is_current = TRUE\n        AND oa.is_investor = FALSE\n),\nFounderPreviousPositions AS (\n    SELECT\n        foc.company_id,\n        foc.founder_person_id,\n        foc.founder_name,\n        lp.linkedin_company_id,\n        lc.company_name AS previous_company_name,\n        lp.start_date AS previous_start_date,\n        lp.end_date AS previous_end_date\n    FROM FoundersOf2025Companies AS foc\n    JOIN linkedin_positions AS lp ON foc.founder_person_id = lp.person_id\n    JOIN linkedin_company AS lc ON lp.linkedin_company_id = lc.id\n    WHERE\n        lp.end_date IS NOT NULL -- Only include past positions\n)\nSELECT\n    c2025.company_name AS current_company_name,\n    fpp.previous_company_name AS common_previous_employer,\n    ARRAY_AGG(DISTINCT fpp.founder_name) AS founders_list\nFROM FounderPreviousPositions AS fpp\nJOIN CompaniesFunded2025 AS c2025 ON fpp.company_id = c2025.company_id\nGROUP BY\n    c2025.company_name,\n    fpp.previous_company_name\nHAVING\n    COUNT(DISTINCT fpp.founder_person_id) >= 3\n    AND MIN(fpp.previous_end_date) >= MAX(fpp.previous_start_date)\nORDER BY\n    current_company_name, common_previous_employer;\n"
      ],
      "expected_path": "Filter deals WHERE EXTRACT(YEAR FROM date) = 2025 to get funded companies. Join to organization_associations WHERE is_founder = TRUE to get founders. Join to linkedin_positions for each founder to get work history. Self-join linkedin_positions three ways (p1, p2, p3) WHERE p1.linkedin_company_id = p2.linkedin_company_id = p3.linkedin_company_id AND p1.person_id < p2.person_id < p3.person_id (avoids duplicate triples). Calculate overlap window: GREATEST(p1.start_date, p2.start_date, p3.start_date) <= LEAST(p1.end_date, p2.end_date, p3.end_date). Join to organizations and linkedin_company for names. Return startup name, startup_id, prior employer, founders who overlapped, overlap period."
    },
    {
      "test_id": 8,
      "question": "Find company with most secondary market transactions and show which investors bought secondary shares",
      "grade": "pass",
      "reasoning": "The agent demonstrated a logical approach, breaking the problem down into two distinct, well-formed queries. The first query correctly identified the company with the most secondary market transactions (OpenAI with 3). The second query, using the ID from the first query, accurately fetched all institutional investments related to OpenAI's secondary market deals, providing investor names, domains, deal sizes, and dates. While the 'Expected Answer Example' suggested a more aggregated format for investors (e.g., 'Thrive Capital (3)'), the agent's output lists each individual investment by investors in OpenAI's secondary deals, which is a defensible interpretation of 'show which investors bought secondary shares' and implicitly provides the count through repetition (e.g., Thrive Capital appears 3 times). The answer is correct and complete in terms of the information requested. Efficiency was excellent, with 2 tool calls, matching the expected number.",
      "tools_called_num": 2,
      "tools_called_expected": 2,
      "answer": "The company with the most secondary market transactions is **OpenAI**, with 3 secondary market transactions.\n\nThe investors who bought secondary shares in OpenAI are:\n\n*   **Andreessen Horowitz** (a16z.com) - Deal Size: $300.0 million, Date: 2023-04-28\n*   **Founders Fund** (foundersfund.com) - Deal Size: $300.0 million, Date: 2023-04-28\n*   **Sequoia Capital** (sequoiacap.com) - Deal Size: $300.0 million, Date: 2023-04-28\n*   **K2 Global** (k2global.co) - Deal Size: $300.0 million, Date: 2023-04-28\n*   **Thrive Capital** (thrivecap.com) - Deal Size: $300.0 million, Date: 2023-04-28\n*   **Thrive Capital** (thrivecap.com) - Deal Size: $0.0 million, Date: 2024-02-16\n*   **MGX** (mgx.ae) - Deal Size: $6,600.0 million, Date: 2025-10-02\n*   **T. Rowe Price Associates** (troweprice.com) - Deal Size: $6,600.0 million, Date: 2025-10-02\n*   **SoftBank** (group.softbank) - Deal Size: $6,600.0 million, Date: 2025-10-02\n*   **Dragoneer Investment Group** (dragoneer.com) - Deal Size: $6,600.0 million, Date: 2025-10-02\n*   **Thrive Capital** (thrivecap.com) - Deal Size: $6,600.0 million, Date: 2025-10-02",
      "expected_answer": "OpenAI (openai.com) has 3 secondary deals -  Top investors who bought secondary shares (deal counts): Thrive Capital (3), Founders Fund (1), K2 Global (1), Andreessen Horowitz (1), Dragoneer Investment Group (1), MGX (1), T. Rowe Price Associates (1), Sequoia Capital (1), SoftBank (1)",
      "sql_queries": [
        "\nSELECT\n  o.name AS company_name,\n  o.id AS company_id,\n  COUNT(d.id) AS secondary_market_transactions_count\nFROM deals AS d\nJOIN organizations AS o ON d.organization_id = o.id\nWHERE\n  d.financing_type = 'SECONDARY_MARKET'\n  AND o.is_investor = FALSE\nGROUP BY\n  o.name,\n  o.id\nORDER BY\n  secondary_market_transactions_count DESC\nLIMIT 1;\n",
        "\nSELECT\n  o_investor.name AS investor_name,\n  o_investor.domain AS investor_domain,\n  d.size_usd AS deal_size_in_millions,\n  FORMAT_TIMESTAMP('%Y-%m-%d', d.date) AS deal_date\nFROM deals AS d\nJOIN institutional_investments AS ii ON d.id = ii.deal_id\nJOIN organizations AS o_investor ON ii.organization_id = o_investor.id\nWHERE\n  d.organization_id = '97ae048e-77bc-471b-821a-f9decb373689' -- OpenAI's company_id\n  AND d.financing_type = 'SECONDARY_MARKET'\nORDER BY\n  d.date ASC;\n"
      ],
      "expected_path": "Filter deals WHERE financing_type = 'SECONDARY_MARKET', COUNT(DISTINCT deals.id) grouped by organization_id. REMINDER: SECONDARY_MARKET represents existing shares traded (not new capital raised) but IS included in deal counts. Join to organizations to get company names. For top companies, join deals → institutional_investments → organizations (investor) to get investor names. CRITICAL: Multiple investors per deal creates 1:N - use STRING_AGG or ARRAY_AGG to concatenate investor names without cartesian products. ORDER BY secondary_transaction_count DESC. Return company name, number of secondary transactions, aggregated list of investors, transaction dates."
    },
    {
      "test_id": 9,
      "question": "Which investor has the highest led deal percentage in 2024 while taking part in at least 10 deals in 2024r",
      "grade": "pass",
      "reasoning": "The agent demonstrated a strong understanding of the task requirements. Its SQL query is logically sound, covering all necessary filters (year, minimum deal participation), joins, aggregations, and calculations (led deal percentage). The use of `COUNT(DISTINCT ii.deal_id)` and `COUNT(DISTINCT CASE WHEN ii.lead_investor = TRUE THEN ii.deal_id END)` is correct for calculating participation and lead deal counts. The `HAVING` clause correctly applies the minimum activity threshold, and the `ORDER BY` and `LIMIT 1` clauses correctly identify the top investor. The addition of `o_investor.is_investor = TRUE` is a good practice. Efficiency is excellent, using only one tool call and one SQL query. The agent's answer clearly states the investor's name, total deals participated, led deals count, and lead percentage for the top investor, fulfilling the information requested by the question, even if the expected example answer included multiple tied investors.",
      "tools_called_num": 1,
      "tools_called_expected": 3,
      "answer": "The investor with the highest led deal percentage in 2024, while participating in at least 10 deals, is **PeakSpan Capital**. They led 10 out of 10 deals, resulting in a 100% led deal percentage.",
      "expected_answer": "- CIBC Innovation Banking — 34 deals participated, 34 led (lead rate = 100%), Leonid Capital Partners — 12 deals participated, 12 led (100%) , Decathlon Capital Partners — 10 deals participated, 10 led (100%)  ,PeakSpan Capital — 10 deals participated, 10 led (100%)  ,Unicorn India Ventures — 10 deals participated, 10 led (100%)",
      "sql_queries": [
        "\nSELECT\n  o_investor.name AS investor_name,\n  COUNT(DISTINCT ii.deal_id) AS total_deals_participated,\n  COUNT(DISTINCT CASE WHEN ii.lead_investor = TRUE THEN ii.deal_id END) AS lead_deals_count,\n  (COUNT(DISTINCT CASE WHEN ii.lead_investor = TRUE THEN ii.deal_id END) * 100.0) / COUNT(DISTINCT ii.deal_id) AS lead_deal_percentage\nFROM organizations AS o_investor\nJOIN institutional_investments AS ii ON o_investor.id = ii.organization_id\nJOIN deals AS d ON ii.deal_id = d.id\nWHERE\n  o_investor.is_investor = TRUE\n  AND EXTRACT(YEAR FROM d.date) = 2024\nGROUP BY\n  o_investor.name\nHAVING\n  COUNT(DISTINCT ii.deal_id) >= 10\nORDER BY\n  lead_deal_percentage DESC\nLIMIT 1;\n"
      ],
      "expected_path": "Filter deals WHERE EXTRACT(YEAR FROM date) = 2024. Join institutional_investments → organizations (investor). GROUP BY investor organization_id and name. Calculate: COUNT(DISTINCT CASE WHEN ii.lead_investor = TRUE THEN deals.id END) / COUNT(DISTINCT deals.id) * 100 AS lead_percentage. Filter HAVING COUNT(DISTINCT deals.id) >= 10 (minimum activity threshold). CRITICAL: lead_investor flag distinguishes lead vs participant roles. REMINDER: Deal counts INCLUDE SECONDARY_MARKET. ORDER BY lead_percentage DESC LIMIT 1. Return investor name, total deals in 2024, led deals count, led percentage."
    }
  ]
}